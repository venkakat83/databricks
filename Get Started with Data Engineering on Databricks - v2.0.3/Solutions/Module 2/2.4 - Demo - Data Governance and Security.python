{"version":"NotebookV1","origId":2730474723968146,"name":"2.4 - Demo - Data Governance and Security","language":"python","commands":[{"version":"CommandV1","origId":2730474723968147,"guid":"63ad92c3-bb81-46e3-a7fa-4eda44fddbd4","subtype":"command","commandType":"auto","position":2.0,"command":"%md-sandbox\n\n<div style=\"text-align: center; line-height: 0; padding-top: 9px;\">\n  <img src=\"https://databricks.com/wp-content/uploads/2018/03/db-academy-rgb-1200px.png\" alt=\"Databricks Learning\" style=\"width: 600px\">\n</div>","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"b08786ba-407a-456d-8b21-6b3753654349"},{"version":"CommandV1","origId":2730474723968148,"guid":"0ed997cd-30fe-4287-b047-0c454a5b775e","subtype":"command","commandType":"auto","position":3.0,"command":"%md\n\n# Demo: Data Governance and Security\n\n**Learning Objectives**\n1. Grant another user the appropriate access to SELECT a table.\n1. Grant a group the appropriate access to SELECT a table.\n1. Revoke another userâ€™s access to a table.","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"586290c6-975d-43d1-a9dd-2669b0bb3f47"},{"version":"CommandV1","origId":2730474723968149,"guid":"c4030cbd-f5bc-4e68-8eee-eb66ecc87868","subtype":"command","commandType":"auto","position":4.0,"command":"%md\n### Getting Catalog Name\nIn the last lesson, we created two tables in the catalog that was created by our classroom setup. If you haven't run the notebook in the last lesson, please do so now.  \n  \nCopy the catalog name from the last lesson now. We will use it in the next cell.","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"e7765021-27d8-44d8-977c-6324142faed5"},{"version":"CommandV1","origId":2730474723968150,"guid":"4799054a-164a-4166-9287-fe7d3659aa1d","subtype":"command","commandType":"auto","position":5.0,"command":"%md\n### Granting Permissions on Tables\nNow that we have created a bronze table, which contains the raw data we ingested from the data file(s), and we have our silver table, which we can use to clean the data and make it ready for use, let's share the silver table with other users on our team in Databricks. We do this using the Data Explorer.  ","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"ef807a3c-a11f-48a9-a9ff-b37f90715b3c"},{"version":"CommandV1","origId":2730474723968151,"guid":"6afe8d0d-7db9-458b-9c17-2eed20db0c4a","subtype":"command","commandType":"auto","position":6.0,"command":"%md\n### The Data Explorer\nTo view the Data Explorer, right-click on **Data** in the left sidebar menu, and open the link in a new tab.  \n  \nDrill open the catalog name in the list of data assets on the left side of the Data Explorer. The name of your catalog is listed in the output of the previous cell. If you do not see the name of your catalog in the Data Explorer, run the previous lesson's notebook in its entirety, and start this lesson over.  \n  \nYour catalog contains the schema we created in the previous lesson, `getting_started` and a `default` schema and `information_schema`. The `default` schema is simply an empty schema that is created when the catalog was created. We will not be discussing the `information_schema` in this course.  \n  \nClick the schema `getting_started`. We see the two tables we created, `customers_bronze` and `customers_silver_merged`. Note the other metadata and tabs as well.  ","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"82f824e0-0edc-44bf-87b2-76494578daec"},{"version":"CommandV1","origId":2730474723968152,"guid":"6db3511c-d5cf-4b79-a887-989a605b0828","subtype":"command","commandType":"auto","position":7.0,"command":"%md\n### Granting Table Permissions to Users\nClick the table `customers_silver_merged`. We see the column information for this table. Note we can also view sammple data, details, permissions, history, lineage, and insights.  \n  \nClick **Permissions**. We can grant and revoke permissions on this table using this tab.  \n  \nClick the **Grant** button.  \n  \nClick inside the **Users and groups** dropdown to open the list. Note that you can grant permissions to individual users, groups, and service principles.  \n  \nChoose a user from the list and close the dropdown list using the `ESC` key on your keyboard.  \n  \nYou can grant **ALL PRIVILEGES**, **MODIFY**, or **SELECT** privileges. Tick the box next to **SELECT**. This allows this user read-only access to this table.  \n  \nClick **Grant**. The new privilege is added to the list.","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"d7a8a82a-df28-4e84-8ea2-e9442a5992e9"},{"version":"CommandV1","origId":2730474723968153,"guid":"7102ca00-44fd-4f59-93c7-858be3c40f8c","subtype":"command","commandType":"auto","position":8.0,"command":"%md\n### Granting Table Permissions to Groups\nDatabricks recommends you use groups to organize permissions and privileges. Using groups, you can subdivide your users based on their roles, and grant privileges to the group. In this way, you can remove a user from a group, and all privileges associated with that group are revoked. To grant privileges to a group:  \n  \nClick the **Grant** button.  \n  \nClick inside the **Users and groups** dropdown to open the list. Choose a group from the list. There may not be very many groups in your workspace, but there will always be either an **Account Users** or a **Users** group. Choose one of these groups and close the dropdown list using the `ESC` key on your keyboard.  \n  \nYou can grant **ALL PRIVILEGES**, **MODIFY**, or **SELECT** privileges. Tick the box next to **SELECT**. This allows this group read-only access to this table.  \n  \nClick **Grant**. The new privilege is added to the list.","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"e0822808-fa49-4ec7-847d-4686c4298ff2"},{"version":"CommandV1","origId":2730474723968154,"guid":"33f88360-afdc-4254-beb7-405ff5e5432e","subtype":"command","commandType":"auto","position":9.0,"command":"%md\n### Revoking Table Permissions\nSince we have granted read-only privileges to all users, we can revoke the individual privileges granted to our one user.  \n  \nRun your mouse over the name of the user to whom you granted privileges on this table and tick the box to the left of the username.  \n  \nClick the **Revoke** button.","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"ff956c67-e702-4586-b1ae-6a120d932c5e"},{"version":"CommandV1","origId":2730474723968155,"guid":"e45c1e51-c169-4aa0-b9ec-ad0aee3ad713","subtype":"command","commandType":"auto","position":10.0,"command":"%md\n\n## Clean up Classroom\n\nWe will continue to use our tables from the previous lesson, so we do not need to run a clean up script.","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"cb781086-35ed-4d6c-861b-adb64f895ce0"},{"version":"CommandV1","origId":2730474723968156,"guid":"ecc6789a-d1db-4036-a0ed-df91f9f636b8","subtype":"command","commandType":"auto","position":11.0,"command":"%md-sandbox\n&copy; 2023 Databricks, Inc. All rights reserved.<br/>\nApache, Apache Spark, Spark and the Spark logo are trademarks of the <a href=\"https://www.apache.org/\">Apache Software Foundation</a>.<br/>\n<br/>\n<a href=\"https://databricks.com/privacy-policy\">Privacy Policy</a> | <a href=\"https://databricks.com/terms-of-use\">Terms of Use</a> | <a href=\"https://help.databricks.com/\">Support</a>","commandVersion":1,"state":"finished","results":null,"resultDbfsStatus":"INLINED_IN_TREE","resultDbfsErrorMessage":null,"errorSummary":null,"errorTraceType":null,"error":null,"workflows":[],"startTime":0,"submitTime":0,"finishTime":0,"collapsed":false,"bindings":{},"inputWidgets":{},"displayType":"table","width":"auto","height":"auto","xColumns":null,"yColumns":null,"pivotColumns":null,"pivotAggregation":null,"useConsistentColors":false,"customPlotOptions":{},"commentThread":[],"commentsVisible":false,"parentHierarchy":[],"diffInserts":[],"diffDeletes":[],"globalVars":{},"latestUser":"a user","latestUserId":null,"commandTitle":"","showCommandTitle":false,"hideCommandCode":false,"hideCommandResult":false,"isLockedInExamMode":false,"iPythonMetadata":null,"metadata":{},"streamStates":{},"datasetPreviewNameToCmdIdMap":{},"tableResultIndex":null,"listResultMetadata":[],"subcommandOptions":null,"contentSha256Hex":null,"nuid":"c95738e3-400a-42b5-999b-ef816165e287"}],"dashboards":[],"guid":"c6d0b8d9-bc7b-4149-863d-65c4303912e5","globalVars":{},"iPythonMetadata":null,"inputWidgets":{},"notebookMetadata":{},"reposExportFormat":"SOURCE"}